# Kafka, Prometheus, and Grafana - Smaxtec Project

This README describes the setup and purpose of Kafka, Prometheus, and Grafana within the Smaxtec project ecosystem. These tools support the data pipeline, monitoring, and visualization of real-time cow health data.

---

## 🐄 Kafka

Apache Kafka is used as a distributed streaming platform to transport real-time cow health data generated by the Fake API to downstream services like Airflow.

### ✅ Purpose
- Acts as a message broker for decoupling producers and consumers.
- Supports high-throughput, low-latency data ingestion.

### ⚙️ Setup Details
- **Kafka Port:** `9092`
- **Zookeeper Port:** `2181`
- Kafka is started via Docker Compose along with Zookeeper.
- A topic named `cow-health-data` is used for streaming the health metrics.

### 📤 Data Flow
- **Producer:** A Python script consumes data from the Fake API and pushes it to the `cow-health-data` topic.
- **Consumer:** Airflow reads from this topic to process and store the data.

---

## 📈 Prometheus

Prometheus is a time-series database and monitoring tool used to scrape and store metrics from various services in the project.

### ✅ Purpose
- Collect real-time metrics from Kafka, Airflow, and other components.
- Allow querying and alerting on service health and performance.

### ⚙️ Setup Details
- **Prometheus Port:** `9090`
- Configured using `prometheus.yml` file.
- Targets defined include Kafka Exporter and Airflow's metrics endpoint.

### 📊 Metrics Collected
- **Kafka:**
  - Broker state
  - Topic message rates
  - Consumer lag
- **Airflow:**
  - DAG runs
  - Task statuses
  - Scheduler heartbeat

Prometheus scrapes these metrics at regular intervals and exposes them for visualization in Grafana.

---

## 📉 Grafana

Grafana is used for creating dashboards and visualizing the metrics collected by Prometheus.

### ✅ Purpose
- Provide a user-friendly interface for monitoring Kafka and Airflow performance.
- Enable visual alerting and operational insights.

### ⚙️ Setup Details
- **Grafana Port:** `3000`
- Connected to Prometheus as a data source.
- Default login: `admin / admin`

### 📊 Dashboards
- Custom dashboards visualize:
  - Kafka topic throughput and consumer lag
  - Airflow DAG and task performance
  - Resource usage and scheduler status

These dashboards assist in real-time monitoring and performance analysis of the pipeline infrastructure.
